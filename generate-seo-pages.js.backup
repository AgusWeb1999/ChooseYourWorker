#!/usr/bin/env node
/**
 * Generador de p√°ginas HTML est√°ticas para SEO
 * Crea una p√°gina optimizada para cada profesi√≥n y ciudad
 */

const fs = require('fs');
const path = require('path');

// Lista de profesiones
const PROFESSIONS = [
  'Carpintero', 'Electricista', 'Plomero', 'Pintor', 'T√©cnico de HVAC',
  'Jardinero', 'Limpieza del Hogar', 'Mantenimiento General', 'Servicios de Mudanza',
  'Cerrajero', 'Alba√±il', 'Gasista', 'Techista', 'Decorador', 'Control de Plagas',
  'Mec√°nico', 'Chofer', 'Ni√±era', 'Cuidador de Adultos', 'Cocinero', 'Panadero',
  'Peluquero', 'Estilista', 'Manicurista', 'Masajista', 'Fot√≥grafo', 'Dise√±ador Gr√°fico',
  'Programador', 'Profesor Particular', 'Entrenador Personal', 'Fumigador', 'Mudanzas',
  'Reparaci√≥n de Computadoras', 'Reparaci√≥n de Celulares', 'Reparaci√≥n de Electrodom√©sticos',
  'Tapicero', 'Vidriero', 'Herrero', 'Soldador', 'Montador de Muebles', 'Paseador de Perros',
  'Veterinario', 'Animador de Eventos', 'DJ', 'M√∫sico', 'Cantante', 'Traductor', 'Redactor',
  'Community Manager', 'Marketing Digital',
];

// Ciudades principales de Uruguay
const CITIES_URUGUAY = [
  'Montevideo', 'Maldonado', 'Canelones', 'Salto', 'Paysand√∫', 
  'Las Piedras', 'Rivera', 'Melo', 'Mercedes', 'Artigas',
  'Minas', 'San Jos√©', 'Durazno', 'Florida', 'Treinta y Tres',
  'Rocha', 'Colonia', 'Tacuaremb√≥', 'Carmelo', 'Fray Bentos',
  'Ciudad de la Costa', 'Pando', 'La Paz', 'Progreso'
];

// Funci√≥n para normalizar texto a URL-friendly
function slugify(text) {
  return text
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '') // Remove accents
    .replace(/[^a-z0-9\s-]/g, '') // Remove special chars
    .trim()
    .replace(/\s+/g, '-'); // Replace spaces with hyphens
}

// Funci√≥n para generar preguntas frecuentes
function generateFAQs(profession, city) {
  const professionLower = profession.toLowerCase();
  return [
    {
      question: `¬øC√≥mo encuentro un ${professionLower} confiable en ${city}?`,
      answer: `En WorkingGo verificamos a todos nuestros profesionales. Pod√©s ver sus calificaciones, rese√±as de otros clientes y perfiles completos antes de contratar. Todos nuestros ${professionLower}s en ${city} est√°n verificados.`
    },
    {
      question: `¬øCu√°nto cuesta contratar un ${professionLower} en ${city}?`,
      answer: `El precio var√≠a seg√∫n el trabajo espec√≠fico. Los profesionales publican sus tarifas por hora y pod√©s solicitar presupuestos sin compromiso. En promedio, los ${professionLower}s en ${city} cobran por hora m√°s materiales si aplica.`
    },
    {
      question: `¬øLos ${professionLower}s trabajan a domicilio en ${city}?`,
      answer: `S√≠, todos los profesionales en nuestra plataforma ofrecen servicio a domicilio en ${city}. Se desplazan hasta tu ubicaci√≥n para realizar el trabajo que necesit√°s.`
    },
    {
      question: `¬øQu√© garant√≠a tengo al contratar por WorkingGo?`,
      answer: `Todos los profesionales est√°n verificados, pod√©s ver rese√±as reales de clientes anteriores, y cont√°s con nuestro sistema de soporte en caso de cualquier problema. Tu satisfacci√≥n es nuestra prioridad.`
    }
  ];
}

// Funci√≥n para generar contenido detallado
function generateDetailedContent(profession, city) {
  const professionLower = profession.toLowerCase();
  return `
    <section class="detailed-content">
      <h2>Contratar ${profession} en ${city} - Servicio Profesional a Domicilio</h2>
      
      <p>
        ¬øNecesit√°s contratar un <strong>${professionLower} en ${city}</strong>? En WorkingGo te conectamos 
        con los mejores profesionales verificados de ${profession.toLowerCase()} que trabajan a domicilio en toda la zona de ${city}. 
        Nuestro servicio te permite comparar perfiles, ver calificaciones reales y contratar de forma segura y r√°pida.
      </p>

      <h3>¬øPor qu√© elegir WorkingGo para encontrar ${professionLower} en ${city}?</h3>
      
      <div class="benefits-detailed">
        <div class="benefit-item">
          <h4>‚úì Profesionales Verificados</h4>
          <p>Todos los ${professionLower}s en nuestra plataforma han sido verificados. Revisamos su documentaci√≥n, 
          experiencia y referencias antes de aprobar sus perfiles.</p>
        </div>
        
        <div class="benefit-item">
          <h4>‚úì Rese√±as Reales</h4>
          <p>Lee opiniones de clientes reales que ya contrataron estos servicios en ${city}. 
          Las calificaciones te ayudan a tomar la mejor decisi√≥n.</p>
        </div>
        
        <div class="benefit-item">
          <h4>‚úì Servicio a Domicilio</h4>
          <p>Todos los profesionales se trasladan hasta tu ubicaci√≥n en ${city}. No necesit√°s moverte, 
          el ${professionLower} va directamente a tu domicilio.</p>
        </div>
        
        <div class="benefit-item">
          <h4>‚úì Presupuestos Sin Compromiso</h4>
          <p>Solicit√° presupuestos gratuitos y sin compromiso. Compar√° precios y eleg√≠ la mejor opci√≥n para tu presupuesto.</p>
        </div>
      </div>

      <h3>¬øC√≥mo funciona WorkingGo?</h3>
      
      <ol class="how-it-works">
        <li><strong>Busc√° el profesional:</strong> Naveg√° por los perfiles de ${professionLower}s en ${city}, 
        filtr√° por calificaci√≥n, precio y disponibilidad.</li>
        
        <li><strong>Revis√° los perfiles:</strong> Mir√° las calificaciones, rese√±as, trabajos anteriores 
        y tarifas de cada profesional.</li>
        
        <li><strong>Contact√° directamente:</strong> Envi√° tu consulta, describ√≠ el trabajo que necesit√°s 
        y solicit√° un presupuesto personalizado.</li>
        
        <li><strong>Contrat√° con confianza:</strong> Una vez que encontr√©s el profesional ideal, 
        coordin√° la visita y realiz√° el pago de forma segura.</li>
      </ol>

      <h3>Servicios de ${profession} m√°s solicitados en ${city}</h3>
      
      <p>Los trabajos m√°s comunes que realizan nuestros ${professionLower}s incluyen:</p>
      <ul class="services-list">
        ${generateServicesList(profession)}
      </ul>

      <h3>Encontr√° el mejor ${professionLower} en ${city} hoy mismo</h3>
      
      <p>
        No pierdas tiempo buscando. En WorkingGo ten√©s acceso inmediato a los mejores 
        <strong>${professionLower}s profesionales en ${city}</strong>. Todos verificados, 
        con rese√±as reales y disponibles para trabajar a domicilio. Empez√° ahora y solucion√° 
        lo que necesit√°s con profesionales de confianza.
      </p>
    </section>
  `;
}

// Funci√≥n para generar lista de servicios seg√∫n profesi√≥n
function generateServicesList(profession) {
  const services = {
    'Electricista': ['Instalaci√≥n el√©ctrica', 'Reparaci√≥n de cortocircuitos', 'Instalaci√≥n de iluminaci√≥n', 'Revisi√≥n de tableros el√©ctricos', 'Instalaci√≥n de enchufes'],
    'Plomero': ['Reparaci√≥n de ca√±er√≠as', 'Destape de ca√±er√≠as', 'Instalaci√≥n de sanitarios', 'Reparaci√≥n de fugas', 'Instalaci√≥n de grifer√≠a'],
    'Carpintero': ['Reparaci√≥n de muebles', 'Fabricaci√≥n a medida', 'Instalaci√≥n de puertas', 'Construcci√≥n de estanter√≠as', 'Restauraci√≥n de madera'],
    'Pintor': ['Pintura de interiores', 'Pintura de exteriores', 'Pintura de fachadas', 'Aplicaci√≥n de revestimientos', 'Alisado y preparaci√≥n'],
    'Jardinero': ['Corte de c√©sped', 'Poda de √°rboles', 'Dise√±o de jardines', 'Mantenimiento de plantas', 'Sistema de riego'],
  };
  
  const defaultServices = ['Servicio profesional', 'Trabajo a domicilio', 'Presupuesto sin cargo', 'Atenci√≥n personalizada', 'Garant√≠a del trabajo'];
  const serviceList = services[profession] || defaultServices;
  
  return serviceList.map(s => `<li>${s}</li>`).join('\n        ');
}

// Funci√≥n para generar keywords relacionadas
function generateKeywords(profession, city) {
  const professionLower = profession.toLowerCase();
  const cityLower = city.toLowerCase();
  
  const keywords = [
    `${professionLower} ${cityLower}`,
    `${professionLower} a domicilio ${cityLower}`,
    `contratar ${professionLower} ${cityLower}`,
    `${professionLower} profesional ${cityLower}`,
    `servicios ${professionLower} ${cityLower}`,
    `buscar ${professionLower} ${cityLower}`,
    `${professionLower} uruguay`,
    `${professionLower} cerca de mi`,
    `encontrar ${professionLower}`,
    `${professionLower} confiable ${cityLower}`,
    `presupuesto ${professionLower} ${cityLower}`,
    `${professionLower} econ√≥mico ${cityLower}`,
    `mejor ${professionLower} ${cityLower}`,
    `${professionLower} calificado ${cityLower}`,
    `servicio ${professionLower} ${cityLower}`,
  ];
  
  return keywords.join(', ');
}

// Funci√≥n para generar descripci√≥n personalizada
function generateDescription(profession, city) {
  const templates = [
    `Encuentra y contrata ${profession.toLowerCase()} profesionales en ${city}. Servicio a domicilio, confiable y r√°pido. Conecta con los mejores profesionales en WorkingGo.`,
    `Busc√°s ${profession.toLowerCase()} en ${city}? En WorkingGo encontr√°s profesionales verificados y calificados. Contrat√° el servicio que necesit√°s con garant√≠a.`,
    `${profession} a domicilio en ${city}. Los mejores profesionales de ${profession.toLowerCase()} cerca tuyo. Presupuestos gratuitos y atenci√≥n inmediata en WorkingGo.`,
    `Servicios de ${profession.toLowerCase()} en ${city}. Profesionales certificados y con las mejores rese√±as. Contrat√° f√°cil y r√°pido con WorkingGo.`,
    `Necesit√°s ${profession.toLowerCase()} en ${city}? WorkingGo te conecta con profesionales confiables. Cotiz√° y contrat√° en minutos. Servicio a domicilio.`,
  ];
  
  return templates[Math.floor(Math.random() * templates.length)];
}

// Generar HTML para una combinaci√≥n profesi√≥n + ciudad
function generateHTML(profession, city) {
  const slug = slugify(`${profession}-${city}`);
  const title = `${profession} en ${city} | WorkingGo - Profesionales a Domicilio`;
  const description = generateDescription(profession, city);
  const keywords = generateKeywords(profession, city);
  const canonicalUrl = `https://working-go.com/servicios/${slug}`;
  const faqs = generateFAQs(profession, city);
  const detailedContent = generateDetailedContent(profession, city);
  
  // Schema.org para FAQs
  const faqSchema = {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": faqs.map(faq => ({
      "@type": "Question",
      "name": faq.question,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": faq.answer
      }
    }))
  };
  
  // Schema.org para LocalBusiness
  const businessSchema = {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "WorkingGo",
    "image": "https://working-go.com/logo.png",
    "url": "https://working-go.com",
    "telephone": "+598-XXX-XXXX",
    "priceRange": "$$",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": city,
      "addressCountry": "UY"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "addressCountry": "UY"
    },
    "areaServed": {
      "@type": "City",
      "name": city
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Servicios de " + profession,
      "itemListElement": [{
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": profession + " a domicilio",
          "description": description
        }
      }]
    }
  };
  
  return `<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${title}</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="${description}">
  <meta name="keywords" content="${keywords}">
  <meta name="robots" content="index, follow">
  <meta name="author" content="WorkingGo">
  <meta name="language" content="Spanish">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="${canonicalUrl}">
  <meta property="og:title" content="${title}">
  <meta property="og:description" content="${description}">
  <meta property="og:image" content="https://working-go.com/og-image.png">
  <meta property="og:locale" content="es_UY">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="${canonicalUrl}">
  <meta property="twitter:title" content="${title}">
  <meta property="twitter:description" content="${description}">
  <meta property="twitter:image" content="https://working-go.com/og-image.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="${canonicalUrl}">
  
  <!-- Geo Tags -->
  <meta name="geo.region" content="UY">
  <meta name="geo.placename" content="${city}">
  
  <!-- Schema.org Markup - FAQs -->
  <script type="application/ld+json">
  ${JSON.stringify(faqSchema, null, 2)}
  </script>
  
  <!-- Schema.org Markup - LocalBusiness -->
  <script type="application/ld+json">
  ${JSON.stringify(businessSchema, null, 2)}
  </script>
  
  <!-- Breadcrumbs Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Inicio",
      "item": "https://working-go.com"
    },{
      "@type": "ListItem",
      "position": 2,
      "name": "Servicios",
      "item": "https://working-go.com/servicios"
    },{
      "@type": "ListItem",
      "position": 3,
      "name": "${profession} en ${city}",
      "item": "${canonicalUrl}"
    }]
  }
  </script>
  
  <!-- Redirect to home after 5 seconds (m√°s tiempo para mejor indexaci√≥n) -->
  <meta http-equiv="refresh" content="5;url=/">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.8;
      color: #1a202c;
      background: #f7fafc;
    }
    
    /* Header */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .header h1 {
      font-size: 2em;
      margin-bottom: 5px;
    }
    .header .logo {
      font-size: 1.2em;
      font-weight: 600;
      margin-bottom: 10px;
    }
    
    /* Breadcrumbs */
    .breadcrumbs {
      background: white;
      padding: 12px 20px;
      font-size: 0.9em;
      color: #718096;
      border-bottom: 1px solid #e2e8f0;
    }
    .breadcrumbs a {
      color: #667eea;
      text-decoration: none;
    }
    .breadcrumbs a:hover {
      text-decoration: underline;
    }
    
    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    /* Hero Section */
    .hero {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
      text-align: center;
    }
    .hero h1 {
      color: #2d3748;
      font-size: 2.5em;
      margin-bottom: 20px;
    }
    .hero .subtitle {
      font-size: 1.3em;
      color: #4a5568;
      margin-bottom: 30px;
    }
    
    /* Features Grid */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin: 40px 0;
    }
    .feature {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .feature:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2);
    }
    .feature-icon {
      font-size: 2.5em;
      margin-bottom: 15px;
    }
    .feature h3 {
      color: #2d3748;
      margin-bottom: 10px;
      font-size: 1.2em;
    }
    .feature p {
      color: #718096;
      font-size: 0.95em;
    }
    
    /* Detailed Content */
    .detailed-content {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }
    .detailed-content h2 {
      color: #2d3748;
      font-size: 2em;
      margin-bottom: 20px;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }
    .detailed-content h3 {
      color: #4a5568;
      font-size: 1.5em;
      margin: 30px 0 15px;
    }
    .detailed-content h4 {
      color: #667eea;
      font-size: 1.2em;
      margin-bottom: 10px;
    }
    .detailed-content p {
      margin-bottom: 15px;
      color: #4a5568;
      line-height: 1.8;
    }
    .detailed-content ul, .detailed-content ol {
      margin: 20px 0 20px 30px;
      color: #4a5568;
    }
    .detailed-content li {
      margin-bottom: 10px;
    }
    
    .benefits-detailed {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin: 30px 0;
    }
    .benefit-item {
      padding: 25px;
      background: #f7fafc;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    
    .how-it-works {
      background: #f7fafc;
      padding: 30px;
      border-radius: 8px;
      list-style-position: inside;
    }
    .how-it-works li {
      padding: 15px 0;
      border-bottom: 1px solid #e2e8f0;
    }
    .how-it-works li:last-child {
      border-bottom: none;
    }
    
    .services-list {
      columns: 2;
      column-gap: 40px;
    }
    
    /* FAQ Section */
    .faq-section {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }
    .faq-section h2 {
      color: #2d3748;
      font-size: 2em;
      margin-bottom: 30px;
      text-align: center;
    }
    .faq-item {
      margin-bottom: 25px;
      padding: 25px;
      background: #f7fafc;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    .faq-item h3 {
      color: #2d3748;
      font-size: 1.2em;
      margin-bottom: 12px;
    }
    .faq-item p {
      color: #4a5568;
      line-height: 1.7;
    }
    
    /* CTA Button */
    .cta-container {
      text-align: center;
      margin: 40px 0;
    }
    .cta-button {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 18px 50px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.2em;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      transition: all 0.3s;
    }
    .cta-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
    }
    
    /* Loading */
    .loading {
      text-align: center;
      margin-top: 40px;
      padding: 30px;
      background: white;
      border-radius: 10px;
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Footer */
    .footer {
      background: #2d3748;
      color: white;
      padding: 40px 20px;
      text-align: center;
      margin-top: 60px;
    }
    .footer a {
      color: #667eea;
      text-decoration: none;
    }
    
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 1.8em;
      }
      .hero .subtitle {
        font-size: 1.1em;
      }
      .services-list {
        columns: 1;
      }
      .detailed-content {
        padding: 25px;
      }
      .container {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="logo">üîß WorkingGo</div>
    <h1>${profession} en ${city}</h1>
    <p>Profesionales verificados a domicilio</p>
  </div>
  
  <!-- Breadcrumbs -->
  <nav class="breadcrumbs">
    <a href="/">Inicio</a> ‚Ä∫ <a href="/servicios">Servicios</a> ‚Ä∫ <span>${profession} en ${city}</span>
  </nav>
  
  <div class="container">
    <!-- Hero Section -->
    <div class="hero">
      <h1>Encontr√° el Mejor ${profession} en ${city}</h1>
      <p class="subtitle">Profesionales verificados, con rese√±as reales y servicio a domicilio</p>
    </div>
    
    <!-- Features -->
    <div class="features">
      <div class="feature">
        <div class="feature-icon">‚úì</div>
        <h3>Profesionales Verificados</h3>
        <p>Todos los ${profession.toLowerCase()}s est√°n verificados y con documentaci√≥n validada</p>
      </div>
      <div class="feature">
        <div class="feature-icon">‚≠ê</div>
        <h3>Rese√±as Reales</h3>
        <p>Lee opiniones de clientes que ya contrataron el servicio</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üè†</div>
        <h3>Servicio a Domicilio</h3>
        <p>Atenci√≥n directamente en tu ubicaci√≥n en ${city}</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üí∞</div>
        <h3>Mejor Precio</h3>
        <p>Compar√° presupuestos y eleg√≠ el que mejor se ajuste</p>
      </div>
    </div>
    
    <!-- Detailed Content -->
    ${detailedContent}
    
    <!-- FAQ Section -->
    <div class="faq-section">
      <h2>Preguntas Frecuentes</h2>
      ${faqs.map(faq => `
        <div class="faq-item">
          <h3>${faq.question}</h3>
          <p>${faq.answer}</p>
        </div>
      `).join('')}
    </div>
    
    <!-- CTA -->
    <div class="cta-container">
      <a href="/" class="cta-button">Ver Profesionales Disponibles</a>
    </div>
    
    <!-- Loading/Redirect -->
    <div class="loading">
      <div class="spinner"></div>
      <p style="color: #718096; margin-top: 15px;">Redirigiendo a la plataforma...</p>
      <p style="color: #a0aec0; font-size: 0.9em; margin-top: 5px;">Ser√°s redirigido en 5 segundos</p>
    </div>
  </div>
  
  <!-- Footer -->
  <div class="footer">
    <p>&copy; 2026 WorkingGo - Plataforma de Profesionales a Domicilio en Uruguay</p>
    <p style="margin-top: 10px;">
      <a href="/">Inicio</a> | 
      <a href="/servicios">Servicios</a> | 
      <a href="/about">Sobre WorkingGo</a>
    </p>
  </div>

  <script>
    // JavaScript redirect (backup)
    setTimeout(function() {
      window.location.href = '/';
    }, 5000);
  </script>
</body>
</html>`;
}
  
  return `<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${title}</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="${description}">
  <meta name="keywords" content="${keywords}">
  <meta name="robots" content="index, follow">
  <meta name="author" content="WorkingGo">
  <meta name="language" content="Spanish">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="${canonicalUrl}">
  <meta property="og:title" content="${title}">
  <meta property="og:description" content="${description}">
  <meta property="og:image" content="https://working-go.com/og-image.png">
  <meta property="og:locale" content="es_UY">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="${canonicalUrl}">
  <meta property="twitter:title" content="${title}">
  <meta property="twitter:description" content="${description}">
  <meta property="twitter:image" content="https://working-go.com/og-image.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="${canonicalUrl}">
  
  <!-- Geo Tags -->
  <meta name="geo.region" content="UY">
  <meta name="geo.placename" content="${city}">
  <meta name="geo.position" content="">
  
  <!-- Schema.org Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Service",
    "serviceType": "${profession}",
    "provider": {
      "@type": "Organization",
      "name": "WorkingGo",
      "url": "https://working-go.com",
      "logo": "https://working-go.com/logo.png"
    },
    "areaServed": {
      "@type": "City",
      "name": "${city}",
      "containedInPlace": {
        "@type": "Country",
        "name": "Uruguay"
      }
    },
    "description": "${description}",
    "url": "${canonicalUrl}"
  }
  </script>
  
  <!-- Redirect to home after indexing (3 seconds) -->
  <meta http-equiv="refresh" content="3;url=/">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      max-width: 800px;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      text-align: center;
    }
    h1 {
      color: #667eea;
      font-size: 2.5em;
      margin-bottom: 20px;
    }
    .subtitle {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 30px;
    }
    .content {
      text-align: left;
      margin: 30px 0;
    }
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .feature {
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      text-align: center;
    }
    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }
    .cta-button {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 15px 40px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.1em;
      margin-top: 20px;
      transition: all 0.3s;
    }
    .cta-button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }
    .loading {
      margin-top: 30px;
      color: #666;
      font-size: 0.9em;
    }
    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîß ${profession} en ${city}</h1>
    <p class="subtitle">Encontr√° y contrat√° profesionales verificados a domicilio</p>
    
    <div class="content">
      <p>
        Busc√°s <strong>${profession.toLowerCase()}</strong> profesionales en <strong>${city}</strong>? 
        WorkingGo te conecta con los mejores profesionales verificados y calificados en tu zona.
      </p>
    </div>
    
    <div class="features">
      <div class="feature">
        <div class="feature-icon">‚úì</div>
        <strong>Verificados</strong>
        <p>Profesionales con documentaci√≥n validada</p>
      </div>
      <div class="feature">
        <div class="feature-icon">‚≠ê</div>
        <strong>Calificados</strong>
        <p>Rese√±as reales de clientes</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üè†</div>
        <strong>A Domicilio</strong>
        <p>Servicio en tu ubicaci√≥n</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üí∞</div>
        <strong>Mejor Precio</strong>
        <p>Cotiz√° gratis y sin compromiso</p>
      </div>
    </div>
    
    <a href="/" class="cta-button">Ver Profesionales Ahora</a>
    
    <div class="loading">
      <div class="spinner"></div>
      <p>Redirigiendo a la plataforma...</p>
    </div>
  </div>

  <script>
    // JavaScript redirect (backup)
    setTimeout(function() {
      window.location.href = '/';
    }, 3000);
  </script>
</body>
</html>`;
}

// Crear directorio si no existe
function ensureDirectoryExists(directory) {
  if (!fs.existsSync(directory)) {
    fs.mkdirSync(directory, { recursive: true });
  }
}

// Generar todas las p√°ginas
function generateAllPages() {
  console.log('üöÄ Iniciando generaci√≥n de p√°ginas SEO optimizadas...\n');
  
  const outputDir = path.join(__dirname, 'servicios');
  ensureDirectoryExists(outputDir);
  
  let totalPages = 0;
  const allUrls = [];
  
  // Generar p√°gina para cada combinaci√≥n profesi√≥n + ciudad
  PROFESSIONS.forEach(profession => {
    CITIES_URUGUAY.forEach(city => {
      const slug = slugify(`${profession}-${city}`);
      const fileName = `${slug}.html`;
      const filePath = path.join(outputDir, fileName);
      const html = generateHTML(profession, city);
      
      fs.writeFileSync(filePath, html, 'utf8');
      allUrls.push(`https://working-go.com/servicios/${fileName}`);
      totalPages++;
      
      if (totalPages % 50 === 0) {
        console.log(`‚úì Generadas ${totalPages} p√°ginas...`);
      }
    });
  });
  
  // Tambi√©n generar p√°ginas solo por profesi√≥n (sin ciudad espec√≠fica)
  PROFESSIONS.forEach(profession => {
    const slug = slugify(`${profession}-uruguay`);
    const fileName = `${slug}.html`;
    const filePath = path.join(outputDir, fileName);
    const html = generateHTML(profession, 'Uruguay');
    
    fs.writeFileSync(filePath, html, 'utf8');
    allUrls.push(`https://working-go.com/servicios/${fileName}`);
    totalPages++;
  });
  
  console.log(`\n‚úÖ Completado! Generadas ${totalPages} p√°ginas HTML optimizadas\n`);
  console.log(`üìÅ Ubicaci√≥n: ${outputDir}\n`);
  
  // Generar lista de URLs para sitemap
  const urlsFilePath = path.join(outputDir, 'urls-list.txt');
  fs.writeFileSync(urlsFilePath, allUrls.join('\n'), 'utf8');
  console.log(`üìã Lista de URLs generada: ${urlsFilePath}\n`);
  
  return { totalPages, outputDir, allUrls };
}

// Ejecutar si se llama directamente
if (require.main === module) {
  try {
    const result = generateAllPages();
    console.log('üéâ Proceso completado exitosamente!');
    process.exit(0);
  } catch (error) {
    console.error('‚ùå Error:', error.message);
    process.exit(1);
  }
}

module.exports = { generateAllPages, generateHTML, slugify };
